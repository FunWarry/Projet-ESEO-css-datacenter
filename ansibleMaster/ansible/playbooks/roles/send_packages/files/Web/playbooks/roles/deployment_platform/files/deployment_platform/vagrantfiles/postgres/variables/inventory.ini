[postgresql_servers]
X.X.X.X

[all:vars]
# Configuration de base Ansible
ansible_user=vagrant
ansible_ssh_private_key_file=/home/vagrant/.ssh/id_rsa
ansible_ssh_common_args='-o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null'
ansible_python_interpreter=/usr/bin/python3
ansible_ssh_retries=5
ansible_ssh_timeout=60

# Configuration de la base de données
db_name: "app_db"
db_user: "app_user"
db_password: "app_password"
postgresql_port: 5432

# Paquets système essentiels
system_packages:
  - python3-psycopg2
  - libpq-dev
  - software-properties-common

# Configuration du pare-feu
[firewall:children]
postgresql_servers

[firewall:vars]
firewall_allowed_ports:
  - { port: 22, proto: tcp, comment: 'SSH' }
  - { port: 5432, proto: tcp, comment: 'PostgreSQL' }
  - { port: 10050, proto: tcp, comment: 'Zabbix Agent' }
